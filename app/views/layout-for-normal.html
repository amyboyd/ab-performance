*{
Optional args:
    metaDescription
    rssUrl
    rssTitle
    moreHead
    moreStyles
    moreScripts
    bodyID
    bodyClass
    (probably some others not documented...)
}*
<!DOCTYPE html>
#{if device?.ie}
    <!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="en"> <![endif]-->
    <!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="en"> <![endif]-->
    <!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="en"> <![endif]-->
    <!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="en"> <![endif]-->
    <!--[if gt IE 9]><!--><html class="ie no-js" lang="en"><!--<![endif]-->
#{/}
#{else}
    <html "♥♥♥" class="no-js" lang="en">
#{/}
    <head>
        <title>#{get 'title' /}</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        #{if get('metaDescription')}
            <meta name="description" content="#{get 'metaDescription' /}" />
        #{/}

        *{ Stylesheets. }*
        <link rel="stylesheet" type="text/css" href="@@{Bundles.siteStyles}" />
        #{get 'moreStyles' /}

        *{ Javascript files and the variable 'moreScripts' are at the end of this file. }*

        <link rel="shortcut icon" type="image/x-icon" href="@{'/public/favicon.ico'}" />
        #{if get('rssUrl')}
            <link rel="alternate" type="application/rss+xml" title="${rssTitle.trim()}" href="${rssUrl.toString().trim()}" />
        #{/}

        #{if get('doc-canonical')}
            <link id="doc-canonical" rel="canonical" href="#{get 'doc-canonical' /}" />
        #{/}
        #{else}
            <link id="doc-canonical" rel="canonical" href="/" />
        #{/}

        <meta id="doc-og-title" property="og:title" content="#{get 'doc-og-title' /}" />
        <meta id="doc-og-type" property="og:type" content="#{get 'doc-og-type' /}" />
        <meta id="doc-og-url" property="og:url" content="#{get 'doc-og-url' /}" />
        <meta id="doc-og-image" property="og:image" content="#{get 'doc-og-image' /}" />
        <meta property="og:site_name" content="${SITE_NAME}" />

        #{get 'moreHead' /}

        *{ Google Analytics. }*
        <script>
var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-25238227-2']); _gaq.push(['_trackPageview']);
#{if !currentUser?.admin && !request?.domain?.startsWith("dev.")}
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
#{/}
        </script>
    </head>
    <body #{if bodyID != null} id="${bodyID.raw()}" #{/} #{if bodyClass != null} class="${bodyClass.raw()}" #{/} >
        <header class="clearfix">
            <a id="logo" href="/">&nbsp;</a>

            <nav id="main-nav">
                #{if !currentUser}
                    <a href="@{Authentication.login(request.url)}">Login/Register</a>
                    &nbsp;&nbsp;<span class="bullet">&bull;</span>&nbsp;&nbsp;
                #{/}

                #{a @SiteFeedbacks.form()}Send Feedback#{/}

                #{if currentUser}
                    &nbsp;&nbsp;<span class="bullet">&bull;</span>&nbsp;&nbsp;
                    <a href="@{Authentication.logout}">Logout (${currentUser.toString().replace(" ", "&nbsp;").raw()})</a>
                #{/}
            </nav>

            *{ Show a warning message to Internet Explorer 6-8 users to upgrade. }*
            %{ v = device?.ieVersion }% 
            #{if v == 6 || v == 7 || v == 8}
                <!--[if lt IE 9]>
                    <div id="ie-upgrade">
                        You are using a very old version of Internet Explorer - version ${v},
                        which was released in ${v == 8 ? '2009' : v == 7 ? '2006' : '2001'}.
                        ${SITE_NAME} (and many other websites) no longer supports your
                        browser and your experience is not as good as it could be.
                        <br /><br />
                        Upgrade to a faster, safer and modern browser like
                        <a href="http://www.google.com/chrome">Google Chrome</a> or
                        <a href="http://getfirefox.com/">Firefox</a>.
                    </div>
                    <div class="clearfix"></div>
                    <br />
                    #{if v == 8}<br />#{/}
                <![endif]-->
            #{/}
        </header>

        <section id="page-content">
            #{debug-form-errors errors /}
            #{if flash?.success}<p class="flash-message">${flash.success}</p>#{/if}
            #{if flash?.error}<p class="flash-message flash-message-error">${flash.error}</p>#{/if}

            #{doLayout /}
        </section>

        <footer id="main-footer">
            <div id="main-footer-inner-container">
                <h6>${SITE_NAME}</h6>
                <p id="main-footer-copyright">&copy; 2011, All Rights Reserved</p>
                <p id="main-footer-links">
                    <a href="@{Application.about}">About ${SITE_NAME}</a>

                    &nbsp;&nbsp;<span class="bullet">&bull;</span>&nbsp;&nbsp;
                    <a href="@{Application.terms}">Terms Of Use</a>

                    &nbsp;&nbsp;<span class="bullet">&bull;</span>&nbsp;&nbsp;
                    <a href="@{Application.privacy}">Privacy Policy</a>

                    #{if play.configuration.getProperty('application.twitterScreenName')}
                        &nbsp;&nbsp;<span class="bullet">&bull;</span>&nbsp;&nbsp;
                        <a href="http://twitter.com/${play.configuration.getProperty('application.twitterScreenName')}">Twitter</a>
                    #{/}
                </p>

                <p id="main-footer-trial-disclaimer">
                    <span id="main-footer-trial-disclaimer-image"></span>
                    ${SITE_NAME} is currently in a field trial. We want to collect
                    #{a @SiteFeedbacks.form()}feedback and suggestions#{/}
                    from potential sellers and buyers, so we can make the site the best it can be.
                    You may notice bugs and unexpected behaviour. Please
                    #{a @SiteFeedbacks.form()}tell us#{/} if
                    that happens, and we will be sure to fix things for you.
                </p>
            </div>
        </footer>

        *{ JavaScript. }*
        #{get 'moreScripts' /}
    </body>
</html>